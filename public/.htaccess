<IfModule mod_rewrite.c>
  RewriteEngine On
  RewriteBase /

  # Archivos físicos primero
  RewriteCond %{REQUEST_FILENAME} -f [OR]
  RewriteCond %{REQUEST_FILENAME} -d
  RewriteRule ^ - [L]

  # JS versionado del widget (único importante)
# JS versiónado: /widget/lapanterarosa.v13.js
  RewriteRule ^widget/([A-Za-z0-9_-]+)\.v([0-9]+)\.js$ widget/widget-js.php?id=$1&v=$2 [QSA,L]

  # Widget HTML (NO necesita versión en URL)
  RewriteRule ^widget/([A-Za-z0-9_-]+)/v/([0-9]+)$ widget/widget.php?id=$1 [QSA,L]

  # API para obtener versión si hiciera falta
  RewriteRule ^api/menu-version/([A-Za-z0-9_-]+)$ api/menu-version.php?id=$1 [QSA,L]

  # Menú público por restaurante
  RewriteRule ^([A-Za-z0-9_-]+)$ menu.php?id=$1 [QSA,L]
</IfModule>