<IfModule mod_rewrite.c>
  RewriteEngine On
  RewriteBase /

  # üß± 1. Permitir servir archivos est√°ticos directamente (CSS, JS, PNG, etc.)
  RewriteCond %{REQUEST_FILENAME} -f [OR]
  RewriteCond %{REQUEST_FILENAME} -d
  RewriteRule ^ - [L]

  # üß™ 2. API REST limpia (sin par√°metros GET)

  ## 2.1 Versi√≥n del men√∫: /api/menu-version/maxmenu
  RewriteRule ^api/menu-version/([A-Za-z0-9_-]+)$ api/menu-version.php?id=$1 [QSA,L]

  ## 2.2 Fallback (antiguo): /api/menu-version?id=maxmenu
  RewriteRule ^api/menu-version$ api/menu-version.php [QSA,L]

  # üß© 3. Widget versionado: /widget/<id>/v/<version>
  RewriteRule ^widget/([A-Za-z0-9_-]+)/v/([0-9]+)$ widget.php [QSA,END,E=RESTAURANT_ID:$1,E=VERSION:$2]

  # ‚ôªÔ∏è 4. Widget sin versi√≥n (legacy / fallback)
  RewriteRule ^widget/([A-Za-z0-9_-]+)$ widget.php [QSA,END,E=RESTAURANT_ID:$1]

  # üåê 5. P√°gina p√∫blica del restaurante: /<restaurantId>
  RewriteRule ^([A-Za-z0-9_-]+)$ menu.php [QSA,END,E=RESTAURANT_ID:$1]
</IfModule>